var F=Object.defineProperty;var q=(L,s,n)=>s in L?F(L,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):L[s]=n;var E=(L,s,n)=>(q(L,typeof s!="symbol"?s+"":s,n),n);var H=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L}var k={},Z={get exports(){return k},set exports(L){k=L}};(function(L,s){(function(n,d){L.exports=d(n)})(typeof H<"u"?H:window||H.window||H.global,function(n){var d={},c="iziToast";document.querySelector("body");var w=!!/Mobi/.test(navigator.userAgent),v=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),b=typeof InstallTrigger<"u",N="ontouchstart"in document.documentElement,x=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],Y={info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},T=568,I={};d.children={};var D={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof window.CustomEvent!="function"){var M=function(l,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(l,a.bubbles,a.cancelable,a.detail),e};M.prototype=window.Event.prototype,window.CustomEvent=M}var g=function(l,a,e){if(Object.prototype.toString.call(l)==="[object Object]")for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&a.call(e,l[i],i,l);else if(l)for(var m=0,C=l.length;m<C;m++)a.call(e,l[m],m,l)},f=function(l,a){var e={};return g(l,function(i,m){e[m]=l[m]}),g(a,function(i,m){e[m]=a[m]}),e},t=function(l){var a=document.createDocumentFragment(),e=document.createElement("div");for(e.innerHTML=l;e.firstChild;)a.appendChild(e.firstChild);return a},o=function(l){var a=btoa(encodeURIComponent(l));return a.replace(/=/g,"")},r=function(l){return l.substring(0,1)=="#"||l.substring(0,3)=="rgb"||l.substring(0,3)=="hsl"},p=function(l){try{return btoa(atob(l))==l}catch{return!1}},u=function(){return{move:function(l,a,e,i){var m,C=.3,h=180;i!==0&&(l.classList.add(c+"-dragged"),l.style.transform="translateX("+i+"px)",i>0?(m=(h-i)/h,m<C&&a.hide(f(e,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),l,"drag")):(m=(h+i)/h,m<C&&a.hide(f(e,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),l,"drag")),l.style.opacity=m,m<C&&((v||b)&&(l.style.left=i+"px"),l.parentNode.style.opacity=C,this.stopMoving(l,null)))},startMoving:function(l,a,e,i){i=i||window.event;var m=N?i.touches[0].clientX:i.clientX,C=l.style.transform.replace("px)","");C=C.replace("translateX(","");var h=m-C;e.transitionIn&&l.classList.remove(e.transitionIn),e.transitionInMobile&&l.classList.remove(e.transitionInMobile),l.style.transition="",N?document.ontouchmove=function(y){y.preventDefault(),y=y||window.event;var O=y.touches[0].clientX,S=O-h;u.move(l,a,e,S)}:document.onmousemove=function(y){y.preventDefault(),y=y||window.event;var O=y.clientX,S=O-h;u.move(l,a,e,S)}},stopMoving:function(l,a){N?document.ontouchmove=function(){}:document.onmousemove=function(){},l.style.opacity="",l.style.transform="",l.classList.contains(c+"-dragged")&&(l.classList.remove(c+"-dragged"),l.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){l.style.transition=""},400))}}}();return d.setSetting=function(l,a,e){d.children[l][a]=e},d.getSetting=function(l,a){return d.children[l][a]},d.destroy=function(){g(document.querySelectorAll("."+c+"-overlay"),function(l,a){l.remove()}),g(document.querySelectorAll("."+c+"-wrapper"),function(l,a){l.remove()}),g(document.querySelectorAll("."+c),function(l,a){l.remove()}),this.children={},document.removeEventListener(c+"-opened",{},!1),document.removeEventListener(c+"-opening",{},!1),document.removeEventListener(c+"-closing",{},!1),document.removeEventListener(c+"-closed",{},!1),document.removeEventListener("keyup",{},!1),I={}},d.settings=function(l){d.destroy(),I=l,D=f(D,l||{})},g(Y,function(l,a){d[a]=function(e){var i=f(I,e||{});i=f(l,i||{}),this.show(i)}}),d.progress=function(l,a,e){var i=this,m=a.getAttribute("data-iziToast-ref"),C=f(this.children[m],l||{}),h=a.querySelector("."+c+"-progressbar div");return{start:function(){typeof C.time.REMAINING>"u"&&(a.classList.remove(c+"-reseted"),h!==null&&(h.style.transition="width "+C.timeout+"ms "+C.progressBarEasing,h.style.width="0%"),C.time.START=new Date().getTime(),C.time.END=C.time.START+C.timeout,C.time.TIMER=setTimeout(function(){clearTimeout(C.time.TIMER),a.classList.contains(c+"-closing")||(i.hide(C,a,"timeout"),typeof e=="function"&&e.apply(i))},C.timeout),i.setSetting(m,"time",C.time))},pause:function(){if(typeof C.time.START<"u"&&!a.classList.contains(c+"-paused")&&!a.classList.contains(c+"-reseted")){if(a.classList.add(c+"-paused"),C.time.REMAINING=C.time.END-new Date().getTime(),clearTimeout(C.time.TIMER),i.setSetting(m,"time",C.time),h!==null){var y=window.getComputedStyle(h),O=y.getPropertyValue("width");h.style.transition="none",h.style.width=O}typeof e=="function"&&setTimeout(function(){e.apply(i)},10)}},resume:function(){typeof C.time.REMAINING<"u"?(a.classList.remove(c+"-paused"),h!==null&&(h.style.transition="width "+C.time.REMAINING+"ms "+C.progressBarEasing,h.style.width="0%"),C.time.END=new Date().getTime()+C.time.REMAINING,C.time.TIMER=setTimeout(function(){clearTimeout(C.time.TIMER),a.classList.contains(c+"-closing")||(i.hide(C,a,"timeout"),typeof e=="function"&&e.apply(i))},C.time.REMAINING),i.setSetting(m,"time",C.time)):this.start()},reset:function(){clearTimeout(C.time.TIMER),delete C.time.REMAINING,i.setSetting(m,"time",C.time),a.classList.add(c+"-reseted"),a.classList.remove(c+"-paused"),h!==null&&(h.style.transition="none",h.style.width="100%"),typeof e=="function"&&setTimeout(function(){e.apply(i)},10)}}},d.hide=function(l,a,e){typeof a!="object"&&(a=document.querySelector(a));var i=this,m=f(this.children[a.getAttribute("data-iziToast-ref")],l||{});m.closedBy=e||null,delete m.time.REMAINING,a.classList.add(c+"-closing"),function(){var y=document.querySelector("."+c+"-overlay");if(y!==null){var O=y.getAttribute("data-iziToast-ref");O=O.split(",");var S=O.indexOf(String(m.ref));S!==-1&&O.splice(S,1),y.setAttribute("data-iziToast-ref",O.join()),O.length===0&&(y.classList.remove("fadeIn"),y.classList.add("fadeOut"),setTimeout(function(){y.remove()},700))}}(),m.transitionIn&&a.classList.remove(m.transitionIn),m.transitionInMobile&&a.classList.remove(m.transitionInMobile),w||window.innerWidth<=T?m.transitionOutMobile&&a.classList.add(m.transitionOutMobile):m.transitionOut&&a.classList.add(m.transitionOut);var C=a.parentNode.offsetHeight;a.parentNode.style.height=C+"px",a.style.pointerEvents="none",(!w||window.innerWidth>T)&&(a.parentNode.style.transitionDelay="0.2s");try{var h=new CustomEvent(c+"-closing",{detail:m,bubbles:!0,cancelable:!0});document.dispatchEvent(h)}catch(y){console.warn(y)}setTimeout(function(){a.parentNode.style.height="0px",a.parentNode.style.overflow="",setTimeout(function(){delete i.children[m.ref],a.parentNode.remove();try{var y=new CustomEvent(c+"-closed",{detail:m,bubbles:!0,cancelable:!0});document.dispatchEvent(y)}catch(O){console.warn(O)}typeof m.onClosed<"u"&&m.onClosed.apply(null,[m,a,e])},1e3)},200),typeof m.onClosing<"u"&&m.onClosing.apply(null,[m,a,e])},d.show=function(l){var a=this,e=f(I,l||{});if(e=f(D,e),e.time={},e.id===null&&(e.id=o(e.title+e.message+e.color)),e.displayMode===1||e.displayMode=="once")try{if(document.querySelectorAll("."+c+"#"+e.id).length>0)return!1}catch{console.warn("["+c+"] Could not find an element with this selector: #"+e.id+". Try to set an valid id.")}if(e.displayMode===2||e.displayMode=="replace")try{g(document.querySelectorAll("."+c+"#"+e.id),function(h,y){a.hide(e,h,"replaced")})}catch{console.warn("["+c+"] Could not find an element with this selector: #"+e.id+". Try to set an valid id.")}e.ref=new Date().getTime()+Math.floor(Math.random()*1e7+1),d.children[e.ref]=e;var i={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:e.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};i.toast.setAttribute("data-iziToast-ref",e.ref),i.toast.appendChild(i.toastBody),i.toastCapsule.appendChild(i.toast),function(){if(i.toast.classList.add(c),i.toast.classList.add(c+"-opening"),i.toastCapsule.classList.add(c+"-capsule"),i.toastBody.classList.add(c+"-body"),i.toastTexts.classList.add(c+"-texts"),w||window.innerWidth<=T?e.transitionInMobile&&i.toast.classList.add(e.transitionInMobile):e.transitionIn&&i.toast.classList.add(e.transitionIn),e.class){var h=e.class.split(" ");g(h,function(y,O){i.toast.classList.add(y)})}e.id&&(i.toast.id=e.id),e.rtl&&(i.toast.classList.add(c+"-rtl"),i.toast.setAttribute("dir","rtl")),e.layout>1&&i.toast.classList.add(c+"-layout"+e.layout),e.balloon&&i.toast.classList.add(c+"-balloon"),e.maxWidth&&(isNaN(e.maxWidth)?i.toast.style.maxWidth=e.maxWidth:i.toast.style.maxWidth=e.maxWidth+"px"),(e.theme!==""||e.theme!=="light")&&i.toast.classList.add(c+"-theme-"+e.theme),e.color&&(r(e.color)?i.toast.style.background=e.color:i.toast.classList.add(c+"-color-"+e.color)),e.backgroundColor&&(i.toast.style.background=e.backgroundColor,e.balloon&&(i.toast.style.borderColor=e.backgroundColor))}(),function(){e.image&&(i.cover.classList.add(c+"-cover"),i.cover.style.width=e.imageWidth+"px",p(e.image.replace(/ /g,""))?i.cover.style.backgroundImage="url(data:image/png;base64,"+e.image.replace(/ /g,"")+")":i.cover.style.backgroundImage="url("+e.image+")",e.rtl?i.toastBody.style.marginRight=e.imageWidth+10+"px":i.toastBody.style.marginLeft=e.imageWidth+10+"px",i.toast.appendChild(i.cover))}(),function(){e.close?(i.buttonClose=document.createElement("button"),i.buttonClose.type="button",i.buttonClose.classList.add(c+"-close"),i.buttonClose.addEventListener("click",function(h){h.target,a.hide(e,i.toast,"button")}),i.toast.appendChild(i.buttonClose)):e.rtl?i.toast.style.paddingLeft="18px":i.toast.style.paddingRight="18px"}(),function(){e.progressBar&&(i.progressBar=document.createElement("div"),i.progressBarDiv=document.createElement("div"),i.progressBar.classList.add(c+"-progressbar"),i.progressBarDiv.style.background=e.progressBarColor,i.progressBar.appendChild(i.progressBarDiv),i.toast.appendChild(i.progressBar)),e.timeout&&(e.pauseOnHover&&!e.resetOnHover&&(i.toast.addEventListener("mouseenter",function(h){a.progress(e,i.toast).pause()}),i.toast.addEventListener("mouseleave",function(h){a.progress(e,i.toast).resume()})),e.resetOnHover&&(i.toast.addEventListener("mouseenter",function(h){a.progress(e,i.toast).reset()}),i.toast.addEventListener("mouseleave",function(h){a.progress(e,i.toast).start()})))}(),function(){e.iconUrl?(i.icon.setAttribute("class",c+"-icon"),i.icon.setAttribute("src",e.iconUrl)):e.icon&&(i.icon.setAttribute("class",c+"-icon "+e.icon),e.iconText&&i.icon.appendChild(document.createTextNode(e.iconText)),e.iconColor&&(i.icon.style.color=e.iconColor)),(e.icon||e.iconUrl)&&(e.rtl?i.toastBody.style.paddingRight="33px":i.toastBody.style.paddingLeft="33px",i.toastBody.appendChild(i.icon))}(),function(){e.title.length>0&&(i.strong=document.createElement("strong"),i.strong.classList.add(c+"-title"),i.strong.appendChild(t(e.title)),i.toastTexts.appendChild(i.strong),e.titleColor&&(i.strong.style.color=e.titleColor),e.titleSize&&(isNaN(e.titleSize)?i.strong.style.fontSize=e.titleSize:i.strong.style.fontSize=e.titleSize+"px"),e.titleLineHeight&&(isNaN(e.titleSize)?i.strong.style.lineHeight=e.titleLineHeight:i.strong.style.lineHeight=e.titleLineHeight+"px")),e.message.length>0&&(i.p=document.createElement("p"),i.p.classList.add(c+"-message"),i.p.appendChild(t(e.message)),i.toastTexts.appendChild(i.p),e.messageColor&&(i.p.style.color=e.messageColor),e.messageSize&&(isNaN(e.titleSize)?i.p.style.fontSize=e.messageSize:i.p.style.fontSize=e.messageSize+"px"),e.messageLineHeight&&(isNaN(e.titleSize)?i.p.style.lineHeight=e.messageLineHeight:i.p.style.lineHeight=e.messageLineHeight+"px")),e.title.length>0&&e.message.length>0&&(e.rtl?i.strong.style.marginLeft="10px":e.layout!==2&&!e.rtl&&(i.strong.style.marginRight="10px"))}(),i.toastBody.appendChild(i.toastTexts);var m;(function(){e.inputs.length>0&&(i.inputs.classList.add(c+"-inputs"),g(e.inputs,function(h,y){i.inputs.appendChild(t(h[0])),m=i.inputs.childNodes,m[y].classList.add(c+"-inputs-child"),h[3]&&setTimeout(function(){m[y].focus()},300),m[y].addEventListener(h[1],function(O){var S=h[2];return S(a,i.toast,this,O)})}),i.toastBody.appendChild(i.inputs))})(),function(){e.buttons.length>0&&(i.buttons.classList.add(c+"-buttons"),g(e.buttons,function(h,y){i.buttons.appendChild(t(h[0]));var O=i.buttons.childNodes;O[y].classList.add(c+"-buttons-child"),h[2]&&setTimeout(function(){O[y].focus()},300),O[y].addEventListener("click",function(S){S.preventDefault();var X=h[1];return X(a,i.toast,this,S,m)})})),i.toastBody.appendChild(i.buttons)}(),e.message.length>0&&(e.inputs.length>0||e.buttons.length>0)&&(i.p.style.marginBottom="0"),(e.inputs.length>0||e.buttons.length>0)&&(e.rtl?i.toastTexts.style.marginLeft="10px":i.toastTexts.style.marginRight="10px",e.inputs.length>0&&e.buttons.length>0&&(e.rtl?i.inputs.style.marginLeft="8px":i.inputs.style.marginRight="8px")),function(){i.toastCapsule.style.visibility="hidden",setTimeout(function(){var h=i.toast.offsetHeight,y=i.toast.currentStyle||window.getComputedStyle(i.toast),O=y.marginTop;O=O.split("px"),O=parseInt(O[0]);var S=y.marginBottom;S=S.split("px"),S=parseInt(S[0]),i.toastCapsule.style.visibility="",i.toastCapsule.style.height=h+S+O+"px",setTimeout(function(){i.toastCapsule.style.height="auto",e.target&&(i.toastCapsule.style.overflow="visible")},500),e.timeout&&a.progress(e,i.toast).start()},100)}(),function(){var h=e.position;if(e.target)i.wrapper=document.querySelector(e.target),i.wrapper.classList.add(c+"-target"),e.targetFirst?i.wrapper.insertBefore(i.toastCapsule,i.wrapper.firstChild):i.wrapper.appendChild(i.toastCapsule);else{if(x.indexOf(e.position)==-1){console.warn("["+c+`] Incorrect position.
It can be › `+x);return}w||window.innerWidth<=T?e.position=="bottomLeft"||e.position=="bottomRight"||e.position=="bottomCenter"?h=c+"-wrapper-bottomCenter":e.position=="topLeft"||e.position=="topRight"||e.position=="topCenter"?h=c+"-wrapper-topCenter":h=c+"-wrapper-center":h=c+"-wrapper-"+h,i.wrapper=document.querySelector("."+c+"-wrapper."+h),i.wrapper||(i.wrapper=document.createElement("div"),i.wrapper.classList.add(c+"-wrapper"),i.wrapper.classList.add(h),document.body.appendChild(i.wrapper)),e.position=="topLeft"||e.position=="topCenter"||e.position=="topRight"?i.wrapper.insertBefore(i.toastCapsule,i.wrapper.firstChild):i.wrapper.appendChild(i.toastCapsule)}isNaN(e.zindex)?console.warn("["+c+"] Invalid zIndex."):i.wrapper.style.zIndex=e.zindex}(),function(){e.overlay&&(document.querySelector("."+c+"-overlay.fadeIn")!==null?(i.overlay=document.querySelector("."+c+"-overlay"),i.overlay.setAttribute("data-iziToast-ref",i.overlay.getAttribute("data-iziToast-ref")+","+e.ref),!isNaN(e.zindex)&&e.zindex!==null&&(i.overlay.style.zIndex=e.zindex-1)):(i.overlay.classList.add(c+"-overlay"),i.overlay.classList.add("fadeIn"),i.overlay.style.background=e.overlayColor,i.overlay.setAttribute("data-iziToast-ref",e.ref),!isNaN(e.zindex)&&e.zindex!==null&&(i.overlay.style.zIndex=e.zindex-1),document.querySelector("body").appendChild(i.overlay)),e.overlayClose?(i.overlay.removeEventListener("click",{}),i.overlay.addEventListener("click",function(h){a.hide(e,i.toast,"overlay")})):i.overlay.removeEventListener("click",{}))}(),function(){if(e.animateInside){i.toast.classList.add(c+"-animateInside");var h=[200,100,300];(e.transitionIn=="bounceInLeft"||e.transitionIn=="bounceInRight")&&(h=[400,200,400]),e.title.length>0&&setTimeout(function(){i.strong.classList.add("slideIn")},h[0]),e.message.length>0&&setTimeout(function(){i.p.classList.add("slideIn")},h[1]),(e.icon||e.iconUrl)&&setTimeout(function(){i.icon.classList.add("revealIn")},h[2]);var y=150;e.buttons.length>0&&i.buttons&&setTimeout(function(){g(i.buttons.childNodes,function(O,S){setTimeout(function(){O.classList.add("revealIn")},y),y=y+150})},e.inputs.length>0?150:0),e.inputs.length>0&&i.inputs&&(y=150,g(i.inputs.childNodes,function(O,S){setTimeout(function(){O.classList.add("revealIn")},y),y=y+150}))}}(),e.onOpening.apply(null,[e,i.toast]);try{var C=new CustomEvent(c+"-opening",{detail:e,bubbles:!0,cancelable:!0});document.dispatchEvent(C)}catch(h){console.warn(h)}setTimeout(function(){i.toast.classList.remove(c+"-opening"),i.toast.classList.add(c+"-opened");try{var h=new CustomEvent(c+"-opened",{detail:e,bubbles:!0,cancelable:!0});document.dispatchEvent(h)}catch(y){console.warn(y)}e.onOpened.apply(null,[e,i.toast])},1e3),e.drag&&(N?(i.toast.addEventListener("touchstart",function(h){u.startMoving(this,a,e,h)},!1),i.toast.addEventListener("touchend",function(h){u.stopMoving(this,h)},!1)):(i.toast.addEventListener("mousedown",function(h){h.preventDefault(),u.startMoving(this,a,e,h)},!1),i.toast.addEventListener("mouseup",function(h){h.preventDefault(),u.stopMoving(this,h)},!1))),e.closeOnEscape&&document.addEventListener("keyup",function(h){h=h||window.event,h.keyCode==27&&a.hide(e,i.toast,"esc")}),e.closeOnClick&&i.toast.addEventListener("click",function(h){a.hide(e,i.toast,"toast")}),a.toast=i.toast},d})})(Z);const G=k;var z={};(function(L){Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;function s(g){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},s(g)}function n(g,f){var t=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!t){if(Array.isArray(g)||(t=w(g))||f&&g&&typeof g.length=="number"){t&&(g=t);var o=0,r=function(){};return{s:r,n:function(){return o>=g.length?{done:!0}:{done:!1,value:g[o++]}},e:function(e){throw e},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,u=!1,l;return{s:function(){t=t.call(g)},n:function(){var e=t.next();return p=e.done,e},e:function(e){u=!0,l=e},f:function(){try{!p&&t.return!=null&&t.return()}finally{if(u)throw l}}}}function d(g){return b(g)||v(g)||w(g)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w(g,f){if(g){if(typeof g=="string")return N(g,f);var t=Object.prototype.toString.call(g).slice(8,-1);if(t==="Object"&&g.constructor&&(t=g.constructor.name),t==="Map"||t==="Set")return Array.from(g);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(g,f)}}function v(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}function b(g){if(Array.isArray(g))return N(g)}function N(g,f){(f==null||f>g.length)&&(f=g.length);for(var t=0,o=new Array(f);t<f;t++)o[t]=g[t];return o}function x(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function")}function Y(g,f){for(var t=0;t<f.length;t++){var o=f[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(g,o.key,o)}}function T(g,f,t){return f&&Y(g.prototype,f),t&&Y(g,t),Object.defineProperty(g,"prototype",{writable:!1}),g}function I(g,f,t){return f in g?Object.defineProperty(g,f,{value:t,enumerable:!0,configurable:!0,writable:!0}):g[f]=t,g}var D=function(){function g(f,t){var o=this;if(x(this,g),I(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),I(this,"transitionPrefix",void 0),I(this,"isPassiveEventsSupported",void 0),I(this,"transitionCapable",!1),I(this,"isTouchDevice","ontouchstart"in window),I(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),I(this,"initialLocationHash",void 0),I(this,"pushStateSupport","pushState"in history),I(this,"isOpen",!1),I(this,"isAnimating",!1),I(this,"isClosing",!1),I(this,"isFadeIn",!1),I(this,"urlChangedOnce",!1),I(this,"hashReseted",!1),I(this,"historyHasChanges",!1),I(this,"historyUpdateTimeout",null),I(this,"currentImage",void 0),I(this,"eventNamespace","simplelightbox"),I(this,"domNodes",{}),I(this,"loadedImages",[]),I(this,"initialImageIndex",0),I(this,"currentImageIndex",0),I(this,"initialSelector",null),I(this,"globalScrollbarWidth",0),I(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,t),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof f=="string"?(this.initialSelector=f,this.elements=Array.from(document.querySelectorAll(f))):this.elements=typeof f.length<"u"&&f.length>0?Array.from(f):[f],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var r=[];this.elements=Array.from(this.elements).filter(function(p){var u=p.getAttribute(o.options.sourceAttr);return r.indexOf(u)===-1?(r.push(u),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(p){if(o.isValidLink(p.currentTarget)){if(p.preventDefault(),o.isAnimating)return!1;o.initialImageIndex=o.elements.indexOf(p.currentTarget),o.openImage(p.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(p){o.isOpen&&p.target===p.currentTarget&&o.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(p){p.target.parentElement.classList.contains("sl-image")&&p.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(p){if(o.controlCoordinates.swipeDiff=0,o.isAnimating&&p.key==="Escape"){o.currentImage.setAttribute("src",""),o.isAnimating=!1,o.close();return}o.isOpen&&(p.preventDefault(),p.key==="Escape"&&o.close(),!o.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(p.key)>-1&&o.loadImage(p.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return T(g,[{key:"checkPassiveEventsSupport",value:function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}catch{}return t}},{key:"getCaptionElement",value:function(t){if(this.options.captionSelector.startsWith("+")){var o=this.options.captionSelector.replace(/^\+/,"").trimStart(),r=t.nextElementSibling;return r&&r.matches(o)?r:!1}else if(this.options.captionSelector.startsWith(">")){var p=this.options.captionSelector.replace(/^>/,"").trimStart();return t.querySelector(p)}else return t.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(t){var o=t.tagName,r=t.id,p=t.className,u=t.parentNode;if(o==="HTML")return"HTML";var l=o;if(l+=r!==""?"#".concat(r):"",p)for(var a=p.trim().split(/\s/),e=0;e<a.length;e++)l+=".".concat(a[e]);for(var i=1,m=t;m.previousElementSibling;m=m.previousElementSibling)i+=1;return l+=":nth-child(".concat(i,")"),"".concat(this.generateQuerySelector(u)," > ").concat(l)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var t,o=this.options.captionClass.split(/[\s,]+/);(t=this.domNodes.caption.classList).add.apply(t,d(o))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(t,o){var r;return function(){r||(t.apply(this,arguments),r=!0,setTimeout(function(){return r=!1},o))}}},{key:"isValidLink",value:function(t){return!this.options.fileExt||t.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(t.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var t=(document.body||document.documentElement).style;return"transition"in t?"":"WebkitTransition"in t?"-webkit-":"MozTransition"in t?"-moz-":"OTransition"in t?"-o":!1}},{key:"getScrollbarWidth",value:function(){var t=0,o=document.createElement("div");return o.classList.add("sl-scrollbar-measure"),document.body.appendChild(o),t=o.offsetWidth-o.clientWidth,document.body.removeChild(o),t}},{key:"toggleScrollbar",value:function(t){var o=0,r=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(t==="hide"){var p=window.innerWidth;if(!p){var u=document.documentElement.getBoundingClientRect();p=u.right-Math.abs(u.left)}if(document.body.clientWidth<p||this.isAppleDevice){var l=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);o=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=l,(o>0||o==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=l+o+"px",r.forEach(function(a){var e=a.style.paddingRight,i=window.getComputedStyle(a)["padding-right"];a.dataset.originalPaddingRight=e,a.style.paddingRight="".concat(parseFloat(i)+o,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",r.forEach(function(a){var e=a.dataset.originalPaddingRight;typeof e<"u"&&(a.style.paddingRight=e)});return o}},{key:"close",value:function(){var t=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var o=this.relatedElements[this.currentImageIndex];o.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){t.options.disableScroll&&t.toggleScrollbar("show"),t.options.htmlClass&&t.options.htmlClass!==""&&document.querySelector("html").classList.remove(t.options.htmlClass),document.body.removeChild(t.domNodes.wrapper),t.options.overlay&&document.body.removeChild(t.domNodes.overlay),t.domNodes.additionalHtml=null,t.domNodes.download=null,o.dispatchEvent(new Event("closed.simplelightbox")),t.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var r in this.controlCoordinates)this.controlCoordinates[r]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var t=this,o=this.currentImageIndex,r=this.relatedElements.length,p=o+1<0?r-1:o+1>=r-1?0:o+1,u=o-1<0?r-1:o-1>=r-1?0:o-1,l=new Image,a=new Image;l.addEventListener("load",function(e){var i=e.target.getAttribute("src");t.loadedImages.indexOf(i)===-1&&t.loadedImages.push(i),t.relatedElements[o].dispatchEvent(new Event("nextImageLoaded."+t.eventNamespace))}),l.setAttribute("src",this.relatedElements[p].getAttribute(this.options.sourceAttr)),a.addEventListener("load",function(e){var i=e.target.getAttribute("src");t.loadedImages.indexOf(i)===-1&&t.loadedImages.push(i),t.relatedElements[o].dispatchEvent(new Event("prevImageLoaded."+t.eventNamespace))}),a.setAttribute("src",this.relatedElements[u].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(t){var o=this,r=t;this.options.rtl&&(t=-t),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((t===1?"next":"prev")+"."+this.eventNamespace));var p=this.currentImageIndex+t;if(this.isAnimating||(p<0||p>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=p<0?this.relatedElements.length-1:p>this.relatedElements.length-1?0:p,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*r-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){o.isAnimating=!0,o.isClosing?o.isAnimating=!1:setTimeout(function(){var u=o.relatedElements[o.currentImageIndex];o.currentImage&&(o.currentImage.setAttribute("src",u.getAttribute(o.options.sourceAttr)),o.loadedImages.indexOf(u.getAttribute(o.options.sourceAttr))===-1&&o.show(o.domNodes.spinner),o.domNodes.image.contains(o.domNodes.caption)&&o.domNodes.image.removeChild(o.domNodes.caption),o.adjustImage(r),o.options.preloading&&o.preload())},100)})}},{key:"adjustImage",value:function(t){var o=this;if(!this.currentImage)return!1;var r=new Image,p=window.innerWidth*this.options.widthRatio,u=window.innerHeight*this.options.heightRatio;r.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),r.addEventListener("error",function(l){o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("error."+o.eventNamespace)),o.isAnimating=!1,o.isOpen=!0,o.domNodes.spinner.style.display="none";var a=t===1||t===-1;if(o.initialImageIndex===o.currentImageIndex&&a)return o.close();o.options.alertError&&alert(o.options.alertErrorMessage),o.loadImage(a?t:1)}),r.addEventListener("load",function(l){typeof t<"u"&&(o.relatedElements[o.currentImageIndex].dispatchEvent(new Event("changed."+o.eventNamespace)),o.relatedElements[o.currentImageIndex].dispatchEvent(new Event((t===1?"nextDone":"prevDone")+"."+o.eventNamespace))),o.options.history&&o.updateURL(),o.loadedImages.indexOf(o.currentImage.getAttribute("src"))===-1&&o.loadedImages.push(o.currentImage.getAttribute("src"));var a=l.target.width,e=l.target.height;if(o.options.scaleImageToRatio||a>p||e>u){var i=a/e>p/u?a/p:e/u;a/=i,e/=i}o.domNodes.image.style.top=(window.innerHeight-e)/2+"px",o.domNodes.image.style.left=(window.innerWidth-a-o.globalScrollbarWidth)/2+"px",o.domNodes.image.style.width=a+"px",o.domNodes.image.style.height=e+"px",o.domNodes.spinner.style.display="none",o.options.focus&&o.forceFocus(),o.fadeIn(o.currentImage,o.options.fadeSpeed,function(){o.options.focus&&o.domNodes.wrapper.focus()}),o.isOpen=!0;var m,C;typeof o.options.captionSelector=="string"?m=o.options.captionSelector==="self"?o.relatedElements[o.currentImageIndex]:o.getCaptionElement(o.relatedElements[o.currentImageIndex]):typeof o.options.captionSelector=="function"&&(m=o.options.captionSelector(o.relatedElements[o.currentImageIndex])),o.options.captions&&m&&(o.options.captionType==="data"?C=m.dataset[o.options.captionsData]:o.options.captionType==="text"?C=m.innerHTML:C=m.getAttribute(o.options.captionsData)),o.options.loop?o.relatedElements.length===1?o.hide(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):o.show(o.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(o.currentImageIndex===0&&o.hide(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex>=o.relatedElements.length-1&&o.hide(o.domNodes.navigation.querySelector(".sl-next")),o.currentImageIndex>0&&o.show(o.domNodes.navigation.querySelector(".sl-prev")),o.currentImageIndex<o.relatedElements.length-1&&o.show(o.domNodes.navigation.querySelector(".sl-next"))),t===1||t===-1?(o.options.animationSlide&&(o.slide(0,100*t+"px"),setTimeout(function(){o.slide(o.options.animationSpeed/1e3,0+"px")},50)),o.fadeIn(o.domNodes.image,o.options.fadeSpeed,function(){o.isAnimating=!1,o.setCaption(C,a)})):(o.isAnimating=!1,o.setCaption(C,a)),o.options.additionalHtml&&!o.domNodes.additionalHtml&&(o.domNodes.additionalHtml=document.createElement("div"),o.domNodes.additionalHtml.classList.add("sl-additional-html"),o.domNodes.additionalHtml.innerHTML=o.options.additionalHtml,o.domNodes.image.appendChild(o.domNodes.additionalHtml)),o.options.download&&o.domNodes.downloadLink.setAttribute("href",o.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(t,o,r){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+t+","+o+") scale("+r+")"}},{key:"minMax",value:function(t,o,r){return t<o?o:t>r?r:t}},{key:"setZoomData",value:function(t,o,r){this.currentImage.dataset.scale=t,this.currentImage.dataset.translateX=o,this.currentImage.dataset.translateY=r}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var t=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(r){t.isOpen&&t.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){t.addEventListener(window,"hashchange."+t.eventNamespace,function(r){t.isOpen&&t.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(r){if(!r.currentTarget.tagName.match(/button/i))return!0;r.preventDefault(),t.controlCoordinates.swipeDiff=0,t.loadImage(r.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var o=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(r){if(t.controlCoordinates.mousedown||t.isAnimating||t.isClosing||!t.isOpen)return!0;t.controlCoordinates.containerHeight==0&&(t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY));var p=r.delta||r.wheelDelta;p===void 0&&(p=r.detail),p=Math.max(-1,Math.min(1,p)),o+=p*t.options.scrollZoomFactor*o,o=Math.max(1,Math.min(t.options.maxZoom,o)),t.controlCoordinates.targetScale=o;var u=document.documentElement.scrollTop||document.body.scrollTop;t.controlCoordinates.pinchOffsetX=r.pageX,t.controlCoordinates.pinchOffsetY=r.pageY-u||0,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1?(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.setZoomData(t.controlCoordinates.targetScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(r){if(r.target.tagName==="A"&&r.type==="touchstart")return!0;if(r.type==="mousedown")r.preventDefault(),t.controlCoordinates.initialPointerOffsetX=r.clientX,t.controlCoordinates.initialPointerOffsetY=r.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.capture=!0;else{if(t.controlCoordinates.touchCount=r.touches.length,t.controlCoordinates.initialPointerOffsetX=r.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=r.touches[0].clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.controlCoordinates.touchCount===1){if(!t.controlCoordinates.doubleTapped)t.controlCoordinates.doubleTapped=!0,setTimeout(function(){t.controlCoordinates.doubleTapped=!1},300);else return t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&t.currentImage.classList.remove("sl-transition")},200),!1;t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY)}else t.controlCoordinates.touchCount===2&&(t.controlCoordinates.initialPointerOffsetX2=r.touches[1].clientX,t.controlCoordinates.initialPointerOffsetY2=r.touches[1].clientY,t.controlCoordinates.initialOffsetX=parseFloat(t.currentImage.dataset.translateX),t.controlCoordinates.initialOffsetY=parseFloat(t.currentImage.dataset.translateY),t.controlCoordinates.pinchOffsetX=(t.controlCoordinates.initialPointerOffsetX+t.controlCoordinates.initialPointerOffsetX2)/2,t.controlCoordinates.pinchOffsetY=(t.controlCoordinates.initialPointerOffsetY+t.controlCoordinates.initialPointerOffsetY2)/2,t.controlCoordinates.initialPinchDistance=Math.sqrt((t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)*(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialPointerOffsetX2)+(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)*(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialPointerOffsetY2)));t.controlCoordinates.capture=!0}return t.controlCoordinates.mousedown?!0:(t.transitionCapable&&(t.controlCoordinates.imageLeft=parseInt(t.domNodes.image.style.left,10)),t.controlCoordinates.mousedown=!0,t.controlCoordinates.swipeDiff=0,t.controlCoordinates.swipeYDiff=0,t.controlCoordinates.swipeStart=r.pageX||r.touches[0].pageX,t.controlCoordinates.swipeYStart=r.pageY||r.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(r){if(!t.controlCoordinates.mousedown)return!0;if(r.type==="touchmove"){if(t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=r.touches[0].clientX,t.controlCoordinates.pointerOffsetY=r.touches[0].clientY,t.controlCoordinates.touchCount=r.touches.length,t.controlCoordinates.touchmoveCount++,t.controlCoordinates.touchCount>1?(t.controlCoordinates.pointerOffsetX2=r.touches[1].clientX,t.controlCoordinates.pointerOffsetY2=r.touches[1].clientY,t.controlCoordinates.targetPinchDistance=Math.sqrt((t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)*(t.controlCoordinates.pointerOffsetX-t.controlCoordinates.pointerOffsetX2)+(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)*(t.controlCoordinates.pointerOffsetY-t.controlCoordinates.pointerOffsetY2)),t.controlCoordinates.initialPinchDistance===null&&(t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance),Math.abs(t.controlCoordinates.initialPinchDistance-t.controlCoordinates.targetPinchDistance)>=1&&(t.controlCoordinates.targetScale=t.minMax(t.controlCoordinates.targetPinchDistance/t.controlCoordinates.initialPinchDistance*t.controlCoordinates.initialScale,1,t.options.maxZoom),t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.scaleDifference=t.controlCoordinates.targetScale-t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.initialOffsetX-(t.controlCoordinates.pinchOffsetX-t.controlCoordinates.containerOffsetX-t.controlCoordinates.containerWidth/2-t.controlCoordinates.initialOffsetX)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.initialOffsetY-(t.controlCoordinates.pinchOffsetY-t.controlCoordinates.containerOffsetY-t.controlCoordinates.containerHeight/2-t.controlCoordinates.initialOffsetY)/(t.controlCoordinates.targetScale-t.controlCoordinates.scaleDifference)*t.controlCoordinates.scaleDifference,t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale),t.controlCoordinates.targetScale>1&&(t.controlCoordinates.zoomed=!0,(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=t.controlCoordinates.targetPinchDistance,t.controlCoordinates.initialScale=t.controlCoordinates.targetScale,t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY)):(t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale))}if(r.type==="mousemove"&&t.controlCoordinates.mousedown){if(r.type=="touchmove")return!0;if(r.preventDefault(),t.controlCoordinates.capture===!1)return!1;t.controlCoordinates.pointerOffsetX=r.clientX,t.controlCoordinates.pointerOffsetY=r.clientY,t.controlCoordinates.targetScale=t.controlCoordinates.initialScale,t.controlCoordinates.limitOffsetX=(t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale-t.controlCoordinates.containerWidth)/2,t.controlCoordinates.limitOffsetY=(t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale-t.controlCoordinates.containerHeight)/2,t.controlCoordinates.targetOffsetX=t.controlCoordinates.imgWidth*t.controlCoordinates.targetScale<=t.controlCoordinates.containerWidth?0:t.minMax(t.controlCoordinates.pointerOffsetX-(t.controlCoordinates.initialPointerOffsetX-t.controlCoordinates.initialOffsetX),t.controlCoordinates.limitOffsetX*-1,t.controlCoordinates.limitOffsetX),t.controlCoordinates.targetOffsetY=t.controlCoordinates.imgHeight*t.controlCoordinates.targetScale<=t.controlCoordinates.containerHeight?0:t.minMax(t.controlCoordinates.pointerOffsetY-(t.controlCoordinates.initialPointerOffsetY-t.controlCoordinates.initialOffsetY),t.controlCoordinates.limitOffsetY*-1,t.controlCoordinates.limitOffsetY),Math.abs(t.controlCoordinates.targetOffsetX)===Math.abs(t.controlCoordinates.limitOffsetX)&&(t.controlCoordinates.initialOffsetX=t.controlCoordinates.targetOffsetX,t.controlCoordinates.initialPointerOffsetX=t.controlCoordinates.pointerOffsetX),Math.abs(t.controlCoordinates.targetOffsetY)===Math.abs(t.controlCoordinates.limitOffsetY)&&(t.controlCoordinates.initialOffsetY=t.controlCoordinates.targetOffsetY,t.controlCoordinates.initialPointerOffsetY=t.controlCoordinates.pointerOffsetY),t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.zoomPanElement(t.controlCoordinates.targetOffsetX+"px",t.controlCoordinates.targetOffsetY+"px",t.controlCoordinates.targetScale)}t.controlCoordinates.zoomed||(t.controlCoordinates.swipeEnd=r.pageX||r.touches[0].pageX,t.controlCoordinates.swipeYEnd=r.pageY||r.touches[0].pageY,t.controlCoordinates.swipeDiff=t.controlCoordinates.swipeStart-t.controlCoordinates.swipeEnd,t.controlCoordinates.swipeYDiff=t.controlCoordinates.swipeYStart-t.controlCoordinates.swipeYEnd,t.options.animationSlide&&t.slide(0,-t.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(r){if(t.isTouchDevice&&r.type==="touchend"&&(t.controlCoordinates.touchCount=r.touches.length,t.controlCoordinates.touchCount===0?(t.currentImage&&t.setZoomData(t.controlCoordinates.initialScale,t.controlCoordinates.targetOffsetX,t.controlCoordinates.targetOffsetY),t.controlCoordinates.initialScale===1&&(t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)),t.controlCoordinates.initialPinchDistance=null,t.controlCoordinates.capture=!1):t.controlCoordinates.touchCount===1?(t.controlCoordinates.initialPointerOffsetX=r.touches[0].clientX,t.controlCoordinates.initialPointerOffsetY=r.touches[0].clientY):t.controlCoordinates.touchCount>1&&(t.controlCoordinates.initialPinchDistance=null)),t.controlCoordinates.mousedown){t.controlCoordinates.mousedown=!1;var p=!0;t.options.loop||(t.currentImageIndex===0&&t.controlCoordinates.swipeDiff<0&&(p=!1),t.currentImageIndex>=t.relatedElements.length-1&&t.controlCoordinates.swipeDiff>0&&(p=!1)),Math.abs(t.controlCoordinates.swipeDiff)>t.options.swipeTolerance&&p?t.loadImage(t.controlCoordinates.swipeDiff>0?1:-1):t.options.animationSlide&&t.slide(t.options.animationSpeed/1e3,0+"px"),t.options.swipeClose&&Math.abs(t.controlCoordinates.swipeYDiff)>50&&Math.abs(t.controlCoordinates.swipeDiff)<t.options.swipeTolerance&&t.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(r){if(!t.isTouchDevice)return t.controlCoordinates.initialPointerOffsetX=r.clientX,t.controlCoordinates.initialPointerOffsetY=r.clientY,t.controlCoordinates.containerHeight=t.getDimensions(t.domNodes.image).height,t.controlCoordinates.containerWidth=t.getDimensions(t.domNodes.image).width,t.controlCoordinates.imgHeight=t.getDimensions(t.currentImage).height,t.controlCoordinates.imgWidth=t.getDimensions(t.currentImage).width,t.controlCoordinates.containerOffsetX=t.domNodes.image.offsetLeft,t.controlCoordinates.containerOffsetY=t.domNodes.image.offsetTop,t.currentImage.classList.add("sl-transition"),t.controlCoordinates.zoomed?(t.controlCoordinates.initialScale=1,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),t.controlCoordinates.zoomed=!1,t.domNodes.caption.style.display==="none"&&t.fadeIn(t.domNodes.caption,t.options.fadeSpeed)):(t.controlCoordinates.initialScale=t.options.doubleTapZoom,t.setZoomData(t.controlCoordinates.initialScale,0,0),t.zoomPanElement(0+"px",0+"px",t.controlCoordinates.initialScale),(!t.domNodes.caption.style.opacity||t.domNodes.caption.style.opacity>0)&&t.domNodes.caption.style.display!=="none"&&t.fadeOut(t.domNodes.caption,t.options.fadeSpeed),t.controlCoordinates.zoomed=!0),setTimeout(function(){t.currentImage&&(t.currentImage.classList.remove("sl-transition"),t.currentImage.style[t.transitionPrefix+"transform-origin"]=null)},200),t.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(t){var o=window.getComputedStyle(t),r=t.offsetHeight,p=t.offsetWidth,u=parseFloat(o.borderTopWidth),l=parseFloat(o.borderBottomWidth),a=parseFloat(o.paddingTop),e=parseFloat(o.paddingBottom),i=parseFloat(o.borderLeftWidth),m=parseFloat(o.borderRightWidth),C=parseFloat(o.paddingLeft),h=parseFloat(o.paddingRight);return{height:r-l-u-a-e,width:p-i-m-C-h}}},{key:"updateHash",value:function(){var t="pid="+(this.currentImageIndex+1),o=window.location.href.split("#")[0]+"#"+t;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,o):this.historyHasChanges?window.location.replace(o):window.location.hash=t,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(t,o,r){var p=this;if(this.options.captions&&t&&t!==""&&typeof t<"u"){var u,l=!((u=r??this.options.captionHTML)!==null&&u!==void 0)||u?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=o+"px",this.domNodes.caption[l]=t,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){p.fadeIn(p.domNodes.caption,p.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(t,o){if(!this.transitionCapable)return this.domNodes.image.style.left=o;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+o+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+t+"s linear"}},{key:"getRelated",value:function(t){var o;return t&&t!==!1&&t!=="nofollow"?o=Array.from(this.elements).filter(function(r){return r.getAttribute("rel")===t}):o=this.elements,o}},{key:"openImage",value:function(t){var o=this;t.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(t.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(t);var r=t.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",r),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(r)===-1&&this.loadedImages.push(r),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){t.dispatchEvent(new Event("shown."+o.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var t=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(o){document!==o.target&&t.domNodes.wrapper!==o.target&&!t.domNodes.wrapper.contains(o.target)&&t.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(t,o,r,p){t=this.wrap(t),o=this.wrap(o);var u=n(t),l;try{for(u.s();!(l=u.n()).done;){var a=l.value;a.namespaces||(a.namespaces={});var e=n(o),i;try{for(e.s();!(i=e.n()).done;){var m=i.value,C=p||!1,h=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(m.split(".")[0])>=0;h&&this.isPassiveEventsSupported&&(s(C)==="object"?C.passive=!0:C={passive:!0}),a.namespaces[m]=r,a.addEventListener(m.split(".")[0],r,C)}}catch(y){e.e(y)}finally{e.f()}}}catch(y){u.e(y)}finally{u.f()}}},{key:"removeEventListener",value:function(t,o){t=this.wrap(t),o=this.wrap(o);var r=n(t),p;try{for(r.s();!(p=r.n()).done;){var u=p.value,l=n(o),a;try{for(l.s();!(a=l.n()).done;){var e=a.value;u.namespaces&&u.namespaces[e]&&(u.removeEventListener(e.split(".")[0],u.namespaces[e]),delete u.namespaces[e])}}catch(i){l.e(i)}finally{l.f()}}}catch(i){r.e(i)}finally{r.f()}}},{key:"fadeOut",value:function(t,o,r){var p=this;t=this.wrap(t);var u=n(t),l;try{for(u.s();!(l=u.n()).done;){var a=l.value;a.style.opacity=parseFloat(a)||window.getComputedStyle(a).getPropertyValue("opacity")}}catch(m){u.e(m)}finally{u.f()}this.isFadeIn=!1;var e=16.66666/(o||this.options.fadeSpeed),i=function m(){var C=parseFloat(t[0].style.opacity);if((C-=e)<0){var h=n(t),y;try{for(h.s();!(y=h.n()).done;){var O=y.value;O.style.display="none",O.style.opacity=1}}catch(A){h.e(A)}finally{h.f()}r&&r.call(p,t)}else{var S=n(t),X;try{for(S.s();!(X=S.n()).done;){var P=X.value;P.style.opacity=C}}catch(A){S.e(A)}finally{S.f()}requestAnimationFrame(m)}};i()}},{key:"fadeIn",value:function(t,o,r,p){var u=this;t=this.wrap(t);var l=n(t),a;try{for(l.s();!(a=l.n()).done;){var e=a.value;e&&(e.style.opacity=0,e.style.display=p||"block")}}catch(h){l.e(h)}finally{l.f()}this.isFadeIn=!0;var i=parseFloat(t[0].dataset.opacityTarget||1),m=16.66666*i/(o||this.options.fadeSpeed),C=function h(){var y=parseFloat(t[0].style.opacity);if((y+=m)>i){var P=n(t),A;try{for(P.s();!(A=P.n()).done;){var R=A.value;R&&(R.style.opacity=i)}}catch(W){P.e(W)}finally{P.f()}r&&r.call(u,t)}else{var O=n(t),S;try{for(O.s();!(S=O.n()).done;){var X=S.value;X&&(X.style.opacity=y)}}catch(W){O.e(W)}finally{O.f()}if(!u.isFadeIn)return;requestAnimationFrame(h)}};C()}},{key:"hide",value:function(t){t=this.wrap(t);var o=n(t),r;try{for(o.s();!(r=o.n()).done;){var p=r.value;p.style.display!="none"&&(p.dataset.initialDisplay=p.style.display),p.style.display="none"}}catch(u){o.e(u)}finally{o.f()}}},{key:"show",value:function(t,o){t=this.wrap(t);var r=n(t),p;try{for(r.s();!(p=r.n()).done;){var u=p.value;u.style.display=u.dataset.initialDisplay||o||"block"}}catch(l){r.e(l)}finally{r.f()}}},{key:"wrap",value:function(t){return typeof t[Symbol.iterator]=="function"&&typeof t!="string"?t:[t]}},{key:"on",value:function(t,o){t=this.wrap(t);var r=n(this.elements),p;try{for(r.s();!(p=r.n()).done;){var u=p.value;u.fullyNamespacedEvents||(u.fullyNamespacedEvents={});var l=n(t),a;try{for(l.s();!(a=l.n()).done;){var e=a.value;u.fullyNamespacedEvents[e]=o,u.addEventListener(e,o)}}catch(i){l.e(i)}finally{l.f()}}}catch(i){r.e(i)}finally{r.f()}return this}},{key:"off",value:function(t){t=this.wrap(t);var o=n(this.elements),r;try{for(o.s();!(r=o.n()).done;){var p=r.value,u=n(t),l;try{for(u.s();!(l=u.n()).done;){var a=l.value;typeof p.fullyNamespacedEvents<"u"&&a in p.fullyNamespacedEvents&&p.removeEventListener(a,p.fullyNamespacedEvents[a])}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return this}},{key:"open",value:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;t=t||this.elements[0],typeof jQuery<"u"&&t instanceof jQuery&&(t=t.get(0)),o>0&&(t=this.elements[o]),this.initialImageIndex=this.elements.indexOf(t),this.initialImageIndex>-1&&this.openImage(t)}},{key:"openPosition",value:function(t){var o=this.elements[t];this.open(o,t)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var t=this.options,o=this.initialSelector;return this.destroy(),this.constructor(o,t),this}}]),g}(),M=D;L.default=M,H.SimpleLightbox=D})(z);const _=B(z);class j{constructor(s,n){E(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1});E(this,"transitionPrefix");E(this,"isPassiveEventsSupported");E(this,"transitionCapable",!1);E(this,"isTouchDevice","ontouchstart"in window);E(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));E(this,"initialLocationHash");E(this,"pushStateSupport","pushState"in history);E(this,"isOpen",!1);E(this,"isAnimating",!1);E(this,"isClosing",!1);E(this,"isFadeIn",!1);E(this,"urlChangedOnce",!1);E(this,"hashReseted",!1);E(this,"historyHasChanges",!1);E(this,"historyUpdateTimeout",null);E(this,"currentImage");E(this,"eventNamespace","simplelightbox");E(this,"domNodes",{});E(this,"loadedImages",[]);E(this,"initialImageIndex",0);E(this,"currentImageIndex",0);E(this,"initialSelector",null);E(this,"globalScrollbarWidth",0);E(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0});if(this.options=Object.assign(this.defaultOptions,n),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof s=="string"?(this.initialSelector=s,this.elements=Array.from(document.querySelectorAll(s))):this.elements=typeof s.length<"u"&&s.length>0?Array.from(s):[s],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){let d=[];this.elements=Array.from(this.elements).filter(c=>{let w=c.getAttribute(this.options.sourceAttr);return d.indexOf(w)===-1?(d.push(w),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,d=>{if(this.isValidLink(d.currentTarget)){if(d.preventDefault(),this.isAnimating)return!1;this.initialImageIndex=this.elements.indexOf(d.currentTarget),this.openImage(d.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],d=>{this.isOpen&&d.target===d.currentTarget&&this.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,d=>{d.target.parentElement.classList.contains("sl-image")&&d.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(d=>{if(this.controlCoordinates.swipeDiff=0,this.isAnimating&&d.key==="Escape"){this.currentImage.setAttribute("src",""),this.isAnimating=!1,this.close();return}this.isOpen&&(d.preventDefault(),d.key==="Escape"&&this.close(),!this.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(d.key)>-1&&this.loadImage(d.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}checkPassiveEventsSupport(){let s=!1;try{let n=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}catch{}return s}getCaptionElement(s){if(this.options.captionSelector.startsWith("+")){let n=this.options.captionSelector.replace(/^\+/,"").trimStart(),d=s.nextElementSibling;return d&&d.matches(n)?d:!1}else if(this.options.captionSelector.startsWith(">")){let n=this.options.captionSelector.replace(/^>/,"").trimStart();return s.querySelector(n)}else return s.querySelector(this.options.captionSelector)}generateQuerySelector(s){const{tagName:n,id:d,className:c,parentNode:w}=s;if(n==="HTML")return"HTML";let v=n;if(v+=d!==""?`#${d}`:"",c){const N=c.trim().split(/\s/);for(let x=0;x<N.length;x++)v+=`.${N[x]}`}let b=1;for(let N=s;N.previousElementSibling;N=N.previousElementSibling)b+=1;return v+=`:nth-child(${b})`,`${this.generateQuerySelector(w)} > ${v}`}createDomNodes(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML=`<button class="sl-prev">${this.options.navText[0]}</button><button class="sl-next">${this.options.navText[1]}</button>`,this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){let s=this.options.captionClass.split(/[\s,]+/);this.domNodes.caption.classList.add(...s)}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}throttle(s,n){let d;return function(){d||(s.apply(this,arguments),d=!0,setTimeout(function(){return d=!1},n))}}isValidLink(s){return!this.options.fileExt||s.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(s.getAttribute(this.options.sourceAttr))}calculateTransitionPrefix(){let s=(document.body||document.documentElement).style;return"transition"in s?"":"WebkitTransition"in s?"-webkit-":"MozTransition"in s?"-moz-":"OTransition"in s?"-o":!1}getScrollbarWidth(){let s=0,n=document.createElement("div");return n.classList.add("sl-scrollbar-measure"),document.body.appendChild(n),s=n.offsetWidth-n.clientWidth,document.body.removeChild(n),s}toggleScrollbar(s){let n=0,d=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(s==="hide"){let c=window.innerWidth;if(!c){let w=document.documentElement.getBoundingClientRect();c=w.right-Math.abs(w.left)}if(document.body.clientWidth<c||this.isAppleDevice){let w=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);n=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=w,(n>0||n==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=w+n+"px",d.forEach(v=>{const b=v.style.paddingRight,N=window.getComputedStyle(v)["padding-right"];v.dataset.originalPaddingRight=b,v.style.paddingRight=`${parseFloat(N)+n}px`}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",d.forEach(c=>{const w=c.dataset.originalPaddingRight;typeof w<"u"&&(c.style.paddingRight=w)});return n}close(){if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;let s=this.relatedElements[this.currentImageIndex];s.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,()=>{this.options.disableScroll&&this.toggleScrollbar("show"),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.remove(this.options.htmlClass),document.body.removeChild(this.domNodes.wrapper),this.options.overlay&&document.body.removeChild(this.domNodes.overlay),this.domNodes.additionalHtml=null,this.domNodes.download=null,s.dispatchEvent(new Event("closed.simplelightbox")),this.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(let n in this.controlCoordinates)this.controlCoordinates[n]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}get hash(){return window.location.hash.substring(1)}preload(){let s=this.currentImageIndex,n=this.relatedElements.length,d=s+1<0?n-1:s+1>=n-1?0:s+1,c=s-1<0?n-1:s-1>=n-1?0:s-1,w=new Image,v=new Image;w.addEventListener("load",b=>{let N=b.target.getAttribute("src");this.loadedImages.indexOf(N)===-1&&this.loadedImages.push(N),this.relatedElements[s].dispatchEvent(new Event("nextImageLoaded."+this.eventNamespace))}),w.setAttribute("src",this.relatedElements[d].getAttribute(this.options.sourceAttr)),v.addEventListener("load",b=>{let N=b.target.getAttribute("src");this.loadedImages.indexOf(N)===-1&&this.loadedImages.push(N),this.relatedElements[s].dispatchEvent(new Event("prevImageLoaded."+this.eventNamespace))}),v.setAttribute("src",this.relatedElements[c].getAttribute(this.options.sourceAttr))}loadImage(s){let n=s;this.options.rtl&&(s=-s),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((s===1?"next":"prev")+"."+this.eventNamespace));let d=this.currentImageIndex+s;if(this.isAnimating||(d<0||d>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=d<0?this.relatedElements.length-1:d>this.relatedElements.length-1?0:d,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*n-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!0,this.isClosing?this.isAnimating=!1:setTimeout(()=>{let c=this.relatedElements[this.currentImageIndex];this.currentImage&&(this.currentImage.setAttribute("src",c.getAttribute(this.options.sourceAttr)),this.loadedImages.indexOf(c.getAttribute(this.options.sourceAttr))===-1&&this.show(this.domNodes.spinner),this.domNodes.image.contains(this.domNodes.caption)&&this.domNodes.image.removeChild(this.domNodes.caption),this.adjustImage(n),this.options.preloading&&this.preload())},100)})}adjustImage(s){if(!this.currentImage)return!1;let n=new Image,d=window.innerWidth*this.options.widthRatio,c=window.innerHeight*this.options.heightRatio;n.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),n.addEventListener("error",w=>{this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("error."+this.eventNamespace)),this.isAnimating=!1,this.isOpen=!0,this.domNodes.spinner.style.display="none";let v=s===1||s===-1;if(this.initialImageIndex===this.currentImageIndex&&v)return this.close();this.options.alertError&&alert(this.options.alertErrorMessage),this.loadImage(v?s:1)}),n.addEventListener("load",w=>{typeof s<"u"&&(this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("changed."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((s===1?"nextDone":"prevDone")+"."+this.eventNamespace))),this.options.history&&this.updateURL(),this.loadedImages.indexOf(this.currentImage.getAttribute("src"))===-1&&this.loadedImages.push(this.currentImage.getAttribute("src"));let v=w.target.width,b=w.target.height;if(this.options.scaleImageToRatio||v>d||b>c){let Y=v/b>d/c?v/d:b/c;v/=Y,b/=Y}this.domNodes.image.style.top=(window.innerHeight-b)/2+"px",this.domNodes.image.style.left=(window.innerWidth-v-this.globalScrollbarWidth)/2+"px",this.domNodes.image.style.width=v+"px",this.domNodes.image.style.height=b+"px",this.domNodes.spinner.style.display="none",this.options.focus&&this.forceFocus(),this.fadeIn(this.currentImage,this.options.fadeSpeed,()=>{this.options.focus&&this.domNodes.wrapper.focus()}),this.isOpen=!0;let N,x;typeof this.options.captionSelector=="string"?N=this.options.captionSelector==="self"?this.relatedElements[this.currentImageIndex]:this.getCaptionElement(this.relatedElements[this.currentImageIndex]):typeof this.options.captionSelector=="function"&&(N=this.options.captionSelector(this.relatedElements[this.currentImageIndex])),this.options.captions&&N&&(this.options.captionType==="data"?x=N.dataset[this.options.captionsData]:this.options.captionType==="text"?x=N.innerHTML:x=N.getAttribute(this.options.captionsData)),this.options.loop?this.relatedElements.length===1?this.hide(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):this.show(this.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(this.currentImageIndex===0&&this.hide(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex>=this.relatedElements.length-1&&this.hide(this.domNodes.navigation.querySelector(".sl-next")),this.currentImageIndex>0&&this.show(this.domNodes.navigation.querySelector(".sl-prev")),this.currentImageIndex<this.relatedElements.length-1&&this.show(this.domNodes.navigation.querySelector(".sl-next"))),s===1||s===-1?(this.options.animationSlide&&(this.slide(0,100*s+"px"),setTimeout(()=>{this.slide(this.options.animationSpeed/1e3,0+"px")},50)),this.fadeIn(this.domNodes.image,this.options.fadeSpeed,()=>{this.isAnimating=!1,this.setCaption(x,v)})):(this.isAnimating=!1,this.setCaption(x,v)),this.options.additionalHtml&&!this.domNodes.additionalHtml&&(this.domNodes.additionalHtml=document.createElement("div"),this.domNodes.additionalHtml.classList.add("sl-additional-html"),this.domNodes.additionalHtml.innerHTML=this.options.additionalHtml,this.domNodes.image.appendChild(this.domNodes.additionalHtml)),this.options.download&&this.domNodes.downloadLink.setAttribute("href",this.currentImage.getAttribute("src"))})}zoomPanElement(s,n,d){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+s+","+n+") scale("+d+")"}minMax(s,n,d){return s<n?n:s>d?d:s}setZoomData(s,n,d){this.currentImage.dataset.scale=s,this.currentImage.dataset.translateX=n,this.currentImage.dataset.translateY=d}hashchangeHandler(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}addEvents(){if(this.addEventListener(window,"resize."+this.eventNamespace,s=>{this.isOpen&&this.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(()=>{this.addEventListener(window,"hashchange."+this.eventNamespace,s=>{this.isOpen&&this.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,s=>{if(!s.currentTarget.tagName.match(/button/i))return!0;s.preventDefault(),this.controlCoordinates.swipeDiff=0,this.loadImage(s.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){let s=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],n=>{if(this.controlCoordinates.mousedown||this.isAnimating||this.isClosing||!this.isOpen)return!0;this.controlCoordinates.containerHeight==0&&(this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY));let d=n.delta||n.wheelDelta;d===void 0&&(d=n.detail),d=Math.max(-1,Math.min(1,d)),s+=d*this.options.scrollZoomFactor*s,s=Math.max(1,Math.min(this.options.maxZoom,s)),this.controlCoordinates.targetScale=s;let c=document.documentElement.scrollTop||document.body.scrollTop;this.controlCoordinates.pinchOffsetX=n.pageX,this.controlCoordinates.pinchOffsetY=n.pageY-c||0,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1?(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.setZoomData(this.controlCoordinates.targetScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],s=>{if(s.target.tagName==="A"&&s.type==="touchstart")return!0;if(s.type==="mousedown")s.preventDefault(),this.controlCoordinates.initialPointerOffsetX=s.clientX,this.controlCoordinates.initialPointerOffsetY=s.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.capture=!0;else{if(this.controlCoordinates.touchCount=s.touches.length,this.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.controlCoordinates.touchCount===1){if(!this.controlCoordinates.doubleTapped)this.controlCoordinates.doubleTapped=!0,setTimeout(()=>{this.controlCoordinates.doubleTapped=!1},300);else return this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&this.currentImage.classList.remove("sl-transition")},200),!1;this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY)}else this.controlCoordinates.touchCount===2&&(this.controlCoordinates.initialPointerOffsetX2=s.touches[1].clientX,this.controlCoordinates.initialPointerOffsetY2=s.touches[1].clientY,this.controlCoordinates.initialOffsetX=parseFloat(this.currentImage.dataset.translateX),this.controlCoordinates.initialOffsetY=parseFloat(this.currentImage.dataset.translateY),this.controlCoordinates.pinchOffsetX=(this.controlCoordinates.initialPointerOffsetX+this.controlCoordinates.initialPointerOffsetX2)/2,this.controlCoordinates.pinchOffsetY=(this.controlCoordinates.initialPointerOffsetY+this.controlCoordinates.initialPointerOffsetY2)/2,this.controlCoordinates.initialPinchDistance=Math.sqrt((this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)*(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialPointerOffsetX2)+(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)*(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialPointerOffsetY2)));this.controlCoordinates.capture=!0}return this.controlCoordinates.mousedown?!0:(this.transitionCapable&&(this.controlCoordinates.imageLeft=parseInt(this.domNodes.image.style.left,10)),this.controlCoordinates.mousedown=!0,this.controlCoordinates.swipeDiff=0,this.controlCoordinates.swipeYDiff=0,this.controlCoordinates.swipeStart=s.pageX||s.touches[0].pageX,this.controlCoordinates.swipeYStart=s.pageY||s.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],s=>{if(!this.controlCoordinates.mousedown)return!0;if(s.type==="touchmove"){if(this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=s.touches[0].clientX,this.controlCoordinates.pointerOffsetY=s.touches[0].clientY,this.controlCoordinates.touchCount=s.touches.length,this.controlCoordinates.touchmoveCount++,this.controlCoordinates.touchCount>1?(this.controlCoordinates.pointerOffsetX2=s.touches[1].clientX,this.controlCoordinates.pointerOffsetY2=s.touches[1].clientY,this.controlCoordinates.targetPinchDistance=Math.sqrt((this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)*(this.controlCoordinates.pointerOffsetX-this.controlCoordinates.pointerOffsetX2)+(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)*(this.controlCoordinates.pointerOffsetY-this.controlCoordinates.pointerOffsetY2)),this.controlCoordinates.initialPinchDistance===null&&(this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance),Math.abs(this.controlCoordinates.initialPinchDistance-this.controlCoordinates.targetPinchDistance)>=1&&(this.controlCoordinates.targetScale=this.minMax(this.controlCoordinates.targetPinchDistance/this.controlCoordinates.initialPinchDistance*this.controlCoordinates.initialScale,1,this.options.maxZoom),this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.scaleDifference=this.controlCoordinates.targetScale-this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.initialOffsetX-(this.controlCoordinates.pinchOffsetX-this.controlCoordinates.containerOffsetX-this.controlCoordinates.containerWidth/2-this.controlCoordinates.initialOffsetX)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.initialOffsetY-(this.controlCoordinates.pinchOffsetY-this.controlCoordinates.containerOffsetY-this.controlCoordinates.containerHeight/2-this.controlCoordinates.initialOffsetY)/(this.controlCoordinates.targetScale-this.controlCoordinates.scaleDifference)*this.controlCoordinates.scaleDifference,this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale),this.controlCoordinates.targetScale>1&&(this.controlCoordinates.zoomed=!0,(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=this.controlCoordinates.targetPinchDistance,this.controlCoordinates.initialScale=this.controlCoordinates.targetScale,this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY)):(this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale))}if(s.type==="mousemove"&&this.controlCoordinates.mousedown){if(s.type=="touchmove")return!0;if(s.preventDefault(),this.controlCoordinates.capture===!1)return!1;this.controlCoordinates.pointerOffsetX=s.clientX,this.controlCoordinates.pointerOffsetY=s.clientY,this.controlCoordinates.targetScale=this.controlCoordinates.initialScale,this.controlCoordinates.limitOffsetX=(this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale-this.controlCoordinates.containerWidth)/2,this.controlCoordinates.limitOffsetY=(this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale-this.controlCoordinates.containerHeight)/2,this.controlCoordinates.targetOffsetX=this.controlCoordinates.imgWidth*this.controlCoordinates.targetScale<=this.controlCoordinates.containerWidth?0:this.minMax(this.controlCoordinates.pointerOffsetX-(this.controlCoordinates.initialPointerOffsetX-this.controlCoordinates.initialOffsetX),this.controlCoordinates.limitOffsetX*-1,this.controlCoordinates.limitOffsetX),this.controlCoordinates.targetOffsetY=this.controlCoordinates.imgHeight*this.controlCoordinates.targetScale<=this.controlCoordinates.containerHeight?0:this.minMax(this.controlCoordinates.pointerOffsetY-(this.controlCoordinates.initialPointerOffsetY-this.controlCoordinates.initialOffsetY),this.controlCoordinates.limitOffsetY*-1,this.controlCoordinates.limitOffsetY),Math.abs(this.controlCoordinates.targetOffsetX)===Math.abs(this.controlCoordinates.limitOffsetX)&&(this.controlCoordinates.initialOffsetX=this.controlCoordinates.targetOffsetX,this.controlCoordinates.initialPointerOffsetX=this.controlCoordinates.pointerOffsetX),Math.abs(this.controlCoordinates.targetOffsetY)===Math.abs(this.controlCoordinates.limitOffsetY)&&(this.controlCoordinates.initialOffsetY=this.controlCoordinates.targetOffsetY,this.controlCoordinates.initialPointerOffsetY=this.controlCoordinates.pointerOffsetY),this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.zoomPanElement(this.controlCoordinates.targetOffsetX+"px",this.controlCoordinates.targetOffsetY+"px",this.controlCoordinates.targetScale)}this.controlCoordinates.zoomed||(this.controlCoordinates.swipeEnd=s.pageX||s.touches[0].pageX,this.controlCoordinates.swipeYEnd=s.pageY||s.touches[0].pageY,this.controlCoordinates.swipeDiff=this.controlCoordinates.swipeStart-this.controlCoordinates.swipeEnd,this.controlCoordinates.swipeYDiff=this.controlCoordinates.swipeYStart-this.controlCoordinates.swipeYEnd,this.options.animationSlide&&this.slide(0,-this.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],s=>{if(this.isTouchDevice&&s.type==="touchend"&&(this.controlCoordinates.touchCount=s.touches.length,this.controlCoordinates.touchCount===0?(this.currentImage&&this.setZoomData(this.controlCoordinates.initialScale,this.controlCoordinates.targetOffsetX,this.controlCoordinates.targetOffsetY),this.controlCoordinates.initialScale===1&&(this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)),this.controlCoordinates.initialPinchDistance=null,this.controlCoordinates.capture=!1):this.controlCoordinates.touchCount===1?(this.controlCoordinates.initialPointerOffsetX=s.touches[0].clientX,this.controlCoordinates.initialPointerOffsetY=s.touches[0].clientY):this.controlCoordinates.touchCount>1&&(this.controlCoordinates.initialPinchDistance=null)),this.controlCoordinates.mousedown){this.controlCoordinates.mousedown=!1;let n=!0;this.options.loop||(this.currentImageIndex===0&&this.controlCoordinates.swipeDiff<0&&(n=!1),this.currentImageIndex>=this.relatedElements.length-1&&this.controlCoordinates.swipeDiff>0&&(n=!1)),Math.abs(this.controlCoordinates.swipeDiff)>this.options.swipeTolerance&&n?this.loadImage(this.controlCoordinates.swipeDiff>0?1:-1):this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,0+"px"),this.options.swipeClose&&Math.abs(this.controlCoordinates.swipeYDiff)>50&&Math.abs(this.controlCoordinates.swipeDiff)<this.options.swipeTolerance&&this.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],s=>{if(!this.isTouchDevice)return this.controlCoordinates.initialPointerOffsetX=s.clientX,this.controlCoordinates.initialPointerOffsetY=s.clientY,this.controlCoordinates.containerHeight=this.getDimensions(this.domNodes.image).height,this.controlCoordinates.containerWidth=this.getDimensions(this.domNodes.image).width,this.controlCoordinates.imgHeight=this.getDimensions(this.currentImage).height,this.controlCoordinates.imgWidth=this.getDimensions(this.currentImage).width,this.controlCoordinates.containerOffsetX=this.domNodes.image.offsetLeft,this.controlCoordinates.containerOffsetY=this.domNodes.image.offsetTop,this.currentImage.classList.add("sl-transition"),this.controlCoordinates.zoomed?(this.controlCoordinates.initialScale=1,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),this.controlCoordinates.zoomed=!1,this.domNodes.caption.style.display==="none"&&this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)):(this.controlCoordinates.initialScale=this.options.doubleTapZoom,this.setZoomData(this.controlCoordinates.initialScale,0,0),this.zoomPanElement(0+"px",0+"px",this.controlCoordinates.initialScale),(!this.domNodes.caption.style.opacity||this.domNodes.caption.style.opacity>0)&&this.domNodes.caption.style.display!=="none"&&this.fadeOut(this.domNodes.caption,this.options.fadeSpeed),this.controlCoordinates.zoomed=!0),setTimeout(()=>{this.currentImage&&(this.currentImage.classList.remove("sl-transition"),this.currentImage.style[this.transitionPrefix+"transform-origin"]=null)},200),this.controlCoordinates.capture=!0,!1})}getDimensions(s){let n=window.getComputedStyle(s),d=s.offsetHeight,c=s.offsetWidth,w=parseFloat(n.borderTopWidth),v=parseFloat(n.borderBottomWidth),b=parseFloat(n.paddingTop),N=parseFloat(n.paddingBottom),x=parseFloat(n.borderLeftWidth),Y=parseFloat(n.borderRightWidth),T=parseFloat(n.paddingLeft),I=parseFloat(n.paddingRight);return{height:d-v-w-b-N,width:c-x-Y-T-I}}updateHash(){let s="pid="+(this.currentImageIndex+1),n=window.location.href.split("#")[0]+"#"+s;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,n):this.historyHasChanges?window.location.replace(n):window.location.hash=s,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}resetHash(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}updateURL(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}setCaption(s,n,d){if(this.options.captions&&s&&s!==""&&typeof s<"u"){const c=d??this.options.captionHTML??!0?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=n+"px",this.domNodes.caption[c]=s,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(()=>{this.fadeIn(this.domNodes.caption,this.options.fadeSpeed)},this.options.captionDelay)}}slide(s,n){if(!this.transitionCapable)return this.domNodes.image.style.left=n;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+n+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+s+"s linear"}getRelated(s){let n;return s&&s!==!1&&s!=="nofollow"?n=Array.from(this.elements).filter(d=>d.getAttribute("rel")===s):n=this.elements,n}openImage(s){s.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(s.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(s);let n=s.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",n),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(n)===-1&&this.loadedImages.push(n),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(()=>{s.dispatchEvent(new Event("shown."+this.eventNamespace))},this.options.animationSpeed)}forceFocus(){this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,s=>{document!==s.target&&this.domNodes.wrapper!==s.target&&!this.domNodes.wrapper.contains(s.target)&&this.domNodes.wrapper.focus()})}addEventListener(s,n,d,c){s=this.wrap(s),n=this.wrap(n);for(let w of s){w.namespaces||(w.namespaces={});for(let v of n){let b=c||!1;["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(v.split(".")[0])>=0&&this.isPassiveEventsSupported&&(typeof b=="object"?b.passive=!0:b={passive:!0}),w.namespaces[v]=d,w.addEventListener(v.split(".")[0],d,b)}}}removeEventListener(s,n){s=this.wrap(s),n=this.wrap(n);for(let d of s)for(let c of n)d.namespaces&&d.namespaces[c]&&(d.removeEventListener(c.split(".")[0],d.namespaces[c]),delete d.namespaces[c])}fadeOut(s,n,d){s=this.wrap(s);for(let v of s)v.style.opacity=parseFloat(v)||window.getComputedStyle(v).getPropertyValue("opacity");this.isFadeIn=!1;let c=16.66666/(n||this.options.fadeSpeed),w=()=>{let v=parseFloat(s[0].style.opacity);if((v-=c)<0){for(let b of s)b.style.display="none",b.style.opacity=1;d&&d.call(this,s)}else{for(let b of s)b.style.opacity=v;requestAnimationFrame(w)}};w()}fadeIn(s,n,d,c){s=this.wrap(s);for(let N of s)N&&(N.style.opacity=0,N.style.display=c||"block");this.isFadeIn=!0;let w=parseFloat(s[0].dataset.opacityTarget||1),v=16.66666*w/(n||this.options.fadeSpeed),b=()=>{let N=parseFloat(s[0].style.opacity);if((N+=v)>w){for(let x of s)x&&(x.style.opacity=w);d&&d.call(this,s)}else{for(let x of s)x&&(x.style.opacity=N);if(!this.isFadeIn)return;requestAnimationFrame(b)}};b()}hide(s){s=this.wrap(s);for(let n of s)n.style.display!="none"&&(n.dataset.initialDisplay=n.style.display),n.style.display="none"}show(s,n){s=this.wrap(s);for(let d of s)d.style.display=d.dataset.initialDisplay||n||"block"}wrap(s){return typeof s[Symbol.iterator]=="function"&&typeof s!="string"?s:[s]}on(s,n){s=this.wrap(s);for(let d of this.elements){d.fullyNamespacedEvents||(d.fullyNamespacedEvents={});for(let c of s)d.fullyNamespacedEvents[c]=n,d.addEventListener(c,n)}return this}off(s){s=this.wrap(s);for(let n of this.elements)for(let d of s)typeof n.fullyNamespacedEvents<"u"&&d in n.fullyNamespacedEvents&&n.removeEventListener(d,n.fullyNamespacedEvents[d]);return this}open(s,n=0){s=s||this.elements[0],typeof jQuery<"u"&&s instanceof jQuery&&(s=s.get(0)),n>0&&(s=this.elements[n]),this.initialImageIndex=this.elements.indexOf(s),this.initialImageIndex>-1&&this.openImage(s)}openPosition(s){let n=this.elements[s];this.open(n,s)}next(){this.loadImage(1)}prev(){this.loadImage(-1)}getLighboxData(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}destroy(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}refresh(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";let s=this.options,n=this.initialSelector;return this.destroy(),this.constructor(n,s),this}}global.SimpleLightbox=j;export{_ as S,G as i};
//# sourceMappingURL=vendor-3d236624.js.map
